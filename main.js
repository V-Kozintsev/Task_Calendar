(()=>{"use strict";var e={364:(e,t,n)=>{n.r(t)},300:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.calendarApi=void 0;const i=n(81);t.calendarApi=new i.LSCalendarApi},81:function(e,t){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function o(e){try{s(i.next(e))}catch(e){r(e)}}function c(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.LSCalendarApi=void 0,t.LSCalendarApi=class{getAll(){return n(this,void 0,void 0,(function*(){const e=localStorage.getItem("taskLocal");return e?JSON.parse(e):[]}))}addTask(e){return n(this,void 0,void 0,(function*(){const t=yield this.getAll();if(t.some((t=>t.date===e.date)))throw new Error(`Task for date ${e.date} already exists`);const n=Object.assign(Object.assign({},e),{id:Date.now().toString()});return localStorage.setItem("taskLocal",JSON.stringify([...t,n])),n}))}deleteTask(e){return n(this,void 0,void 0,(function*(){const t=yield this.getAll();return t.splice(e,1),localStorage.setItem("taskLocal",JSON.stringify(t)),!0}))}getForDate(e){return n(this,void 0,void 0,(function*(){return(yield this.getAll()).filter((t=>t.date===e))}))}updateTask(e,t){return n(this,void 0,void 0,(function*(){const n=(yield this.getAll()).map((n=>n.date!==e?n:Object.assign(Object.assign({},n),t)));localStorage.setItem("taskLocal",JSON.stringify(n))}))}}},912:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function o(e){try{s(i.next(e))}catch(e){r(e)}}function c(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteTask=function(e){return i(this,void 0,void 0,(function*(){yield a.calendarApi.deleteTask(e),(0,r.updateTask)()}))};const a=n(300),r=n(650)},156:function(e,t,n){var i,a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function o(e){try{s(i.next(e))}catch(e){r(e)}}function c(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.tasks=t.setSelectedDate=t.setEditingTaskIndex=t.editingTaskIndex=t.selectedDate=t.inputDescription=t.inputHeading=t.monthYear=t.currentDates=t.overlay=t.currentButton=t.currentTaskContainer=t.popup=t.emptyCells=void 0;const r=n(300);n(364);const o=n(888),c=n(650);t.emptyCells=document.getElementById("dates"),t.popup=document.querySelector(".popup"),t.currentTaskContainer=document.querySelector(".box-task"),t.currentButton=document.querySelector(".box-btn"),t.overlay=document.getElementById("overlay"),t.currentDates=new Date,t.monthYear=document.getElementById("monthYear");const s=document.getElementById("nextMonth"),d=document.getElementById("prevMonth");t.inputHeading=document.querySelector(".task-title"),t.inputDescription=document.getElementById("task-description"),t.selectedDate=null,t.editingTaskIndex=null,t.setEditingTaskIndex=e=>t.editingTaskIndex=e,t.setSelectedDate=e=>t.selectedDate=e,t.tasks=[],r.calendarApi.getAll().then((e=>{t.tasks=e,(0,o.renderCalendar)()}));const u=document.getElementById("save-task-form");null==s||s.addEventListener("click",(()=>{t.currentDates.setMonth(t.currentDates.getMonth()+1),(0,o.renderCalendar)()})),null==d||d.addEventListener("click",(()=>{t.currentDates.setMonth(t.currentDates.getMonth()-1),(0,o.renderCalendar)()})),null===(i=document.querySelector(".close-btn"))||void 0===i||i.addEventListener("click",(()=>{t.overlay&&t.popup&&(t.overlay.classList.remove("show"),t.popup.classList.remove("show"),(0,o.renderCalendar)())})),null==u||u.addEventListener("submit",(e=>a(void 0,void 0,void 0,(function*(){e.preventDefault();const n=t.inputHeading?t.inputHeading.value.trim():"",i=t.inputDescription?t.inputDescription.value.trim():"";if(null!==t.editingTaskIndex)yield r.calendarApi.updateTask(t.selectedDate,{title:n,description:i});else{try{yield r.calendarApi.addTask({title:n,description:i,date:t.selectedDate})}catch(e){alert("Something went wrong: "+e.message)}yield r.calendarApi.getAll().then((e=>{t.tasks=e}))}(0,c.updateTask)(),t.inputHeading&&t.inputDescription&&(t.inputHeading.value="",t.inputDescription.value=""),t.editingTaskIndex=null}))))},888:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function o(e){try{s(i.next(e))}catch(e){r(e)}}function c(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.renderCalendar=function(){return i(this,void 0,void 0,(function*(){if(!a.emptyCells||!a.monthYear)return;a.emptyCells.innerHTML="";const e=a.currentDates.getMonth(),t=a.currentDates.getFullYear(),n=new Date(t,e+1,0).getDate(),i=(new Date(t,e,1).getDay()+6)%7;a.monthYear.textContent=a.currentDates.toLocaleDateString("ru-RU",{month:"long",year:"numeric"});for(let e=0;e<i;e++){const e=document.createElement("div");e.className="days",a.emptyCells.appendChild(e)}for(let i=1;i<=n;i++){const n=document.createElement("div");n.className="days",n.textContent=i.toString();const c=`${t}-${String(e+1).padStart(2,"0")}-${String(i).padStart(2,"0")}`,s=yield r.calendarApi.getForDate(c);s.length>0&&s.forEach((e=>{const t=document.createElement("div");t.className="task-indicator",t.textContent=e.title,n.appendChild(t)})),a.emptyCells.appendChild(n),n.addEventListener("click",(()=>{a.overlay&&a.popup&&(a.overlay.classList.add("show"),a.popup.classList.add("show"),(0,a.setSelectedDate)(c),(0,o.updateTask)())}))}}))};const a=n(156),r=n(300),o=n(650)},650:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function o(e){try{s(i.next(e))}catch(e){r(e)}}function c(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateTask=function(){return i(this,void 0,void 0,(function*(){a.currentTaskContainer&&a.currentButton&&(a.currentTaskContainer.innerHTML="",a.currentButton.innerHTML="",a.inputHeading&&a.inputDescription&&(a.inputHeading.value="",a.inputDescription.value=""),(yield r.calendarApi.getForDate(a.selectedDate)).forEach((e=>{const t=document.createElement("div");t.className="added-task",t.textContent=`${e.title}: ${e.description}`,null===a.currentTaskContainer||void 0===a.currentTaskContainer||a.currentTaskContainer.appendChild(t);const n=document.createElement("button");n.textContent="Удалить",n.addEventListener("click",(()=>{(0,o.deleteTask)(a.tasks.indexOf(e))})),null===a.currentButton||void 0===a.currentButton||a.currentButton.appendChild(n);const i=document.createElement("button");i.textContent="Редактировать",i.type="button",i.addEventListener("click",(()=>{(0,a.setEditingTaskIndex)(a.tasks.indexOf(e)),a.inputHeading&&a.inputDescription&&(a.inputHeading.value=e.title,a.inputDescription.value=e.description)})),null===a.currentButton||void 0===a.currentButton||a.currentButton.appendChild(i)})))}))};const a=n(156),r=n(300),o=n(912)}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(156)})();