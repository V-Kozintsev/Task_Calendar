(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function n(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,"string");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var r=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"key","tasks"),n(this,"arrayTask",[]),this.loadTasks()},a=[{key:"createTask",value:function(e,t,n){var a={title:e,description:t,date:n};this.arrayTask.push(a),this.saveTasks()}},{key:"saveTasks",value:function(){localStorage.setItem(this.key,JSON.stringify(this.arrayTask))}},{key:"loadTasks",value:function(){this.arrayTask=this.getTask()}},{key:"getTask",value:function(){var e=localStorage.getItem(this.key);if(e)try{var t=JSON.parse(e);return Array.isArray(t)?t:(console.warn("Data in localStorage is not an array"),[])}catch(e){return console.error("Failed to parse tasks from localStorage:",e),[]}return[]}},{key:"showTask",value:function(){return this.arrayTask}},{key:"deleteTask",value:function(e){this.arrayTask=this.arrayTask.filter((function(t){return t.title!==e})),this.saveTasks()}},{key:"clickTask",value:function(e){var t=this.arrayTask.find((function(t){return t.title===e}));return t?{title:t.title,description:t.description}:null}},{key:"deleteTaskAll",value:function(){localStorage.removeItem(this.key),this.arrayTask=[]}}],a&&t(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,a}();!function(){var e,t,n=new r,a=new Date,o=a.getMonth(),l=a.getFullYear(),c=null,i=document.getElementById("taskContainer");function s(){i.innerHTML="";var e=n.showTask();if(Array.isArray(e)){var t={};e.forEach((function(e){var n=e.date;t[n]||(t[n]=[]),t[n].push(e.title);var a=document.createElement("div");a.classList.add("task");var r=document.createElement("h3");r.textContent=e.title;var o=document.createElement("p");o.textContent=e.description,a.appendChild(r),a.appendChild(o),i.appendChild(a)})),document.querySelectorAll(".calendar-cell[data-date]").forEach((function(e){var n=e.getAttribute("data-date");if(n){var a="".concat(l,"-").concat(o+1,"-").concat(n);if(t[a]){var r=document.createElement("div");r.classList.add("tasks-list"),t[a].forEach((function(e){var t=document.createElement("div");t.textContent=e,r.appendChild(t)})),e.appendChild(r)}}}))}else console.error("lastTask is not an array:",e)}s();var u=document.getElementById("save-task");function d(){var e=document.querySelector(".calendar-grid");document.getElementById("month").textContent=a.toLocaleString("ru-RU",{month:"long",year:"numeric"}),e.innerHTML="",["Пн","Вт","Ср","Чт","Пт","Сб","Вс"].forEach((function(t){e.innerHTML+='<div class="calendar-cell calendar-cell--header">'.concat(t,"</div>")}));for(var t=new Date(l,o+1,0).getDate(),n=new Date(l,o,1).getDay(),r=new Date(l,o,0).getDate(),i=n-1;i>=0;i--){var u=r-i;e.innerHTML+='<div class="calendar-cell calendar-cell--previous">'.concat(u,"</div>")}for(var d=1;d<=t;d++)e.innerHTML+='<div class="calendar-cell" data-date="'.concat(d,'">').concat(d,"</div>");for(var v=42-(n+t),y=1;y<=v;y++)e.innerHTML+='<div class="calendar-cell calendar-cell--next">'.concat(y,"</div>");var f=document.getElementById("task-popup"),m=document.getElementById("close-popup"),k=document.querySelectorAll(".calendar-cell[data-date]");null==m||m.addEventListener("click",(function(){f&&(f.style.display="none",c=null)})),k.forEach((function(e){e.addEventListener("click",(function(){var t=e.getAttribute("data-date");t?(console.log("Выбранная дата: ".concat(t)),c="".concat(l,"-").concat(o+1,"-").concat(t),function(){if(f){var e=document.getElementById("task-title"),t=document.getElementById("task-description");e.value="",t.value="",f.style.display="block"}}()):console.log("Атрибут data-date не найден.")}))}));var p=document.getElementById("task"),h=document.getElementById("task-popupTasks"),g=document.getElementById("close-popupTasks");p.addEventListener("click",(function(){h.style.display="block"})),g.addEventListener("click",(function(){h.style.display="none"})),s()}function v(e){(o+=e)>11?(o=0,l++):o<0&&(o=11,l--),a.setFullYear(l,o),d()}null==u||u.addEventListener("click",(function(e){e.preventDefault();var t=document.getElementById("task-title"),a=document.getElementById("task-description"),r=t.value.trim(),o=a.value.trim();r&&o&&c&&(n.createTask(r,o,c),s(),t.value="",a.value=""),c=null})),null===(e=document.querySelector(".control-button-next"))||void 0===e||e.addEventListener("click",(function(){return v(1)})),null===(t=document.querySelector(".control-button-prev"))||void 0===t||t.addEventListener("click",(function(){return v(-1)})),d()}()})();